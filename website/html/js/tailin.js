/*! tailinserver 2017-03-22 */
var TL=TL||{REVISION:"0.0.6.0-2016-12.22",LockScrren:!1,LoginName:"",LoginPassword:"",Auth:"",Plc_State:{running:2,error_running:0,stop:3,error_stop:1,converting:-1},Plc_Current_State:-255,PlcOpen:function(){console.log("Turn on..."),console.log("\t send relay_on");var a=NavEvent.Topic(NavEvent.TopicEnum.waypointUserPub);a.publish(NavEvent.Msg("relay_on")),setTimeout(function(){console.log("\t send relay_reset"),a.publish(NavEvent.Msg("relay_reset"))},1500),console.log("Turn on done.")},PlcClose:function(){console.log("Turn off..."),console.log("\t send relay_off");var a=NavEvent.Topic(NavEvent.TopicEnum.waypointUserPub);a.publish(NavEvent.Msg("relay_off")),setTimeout(function(){console.log("\t send relay_reset"),a.publish(NavEvent.Msg("relay_reset"))},1500),console.log("Turn off done.")},PlcStatus:function(){console.log("send read_status");var a=NavEvent.Topic(NavEvent.TopicEnum.waypointUserPub);a.publish(NavEvent.Msg("read_status"))}};$(function(){$("#btn-lock-software").click(function(){TL.LockScreen=!0,$("#hrg-lock-software-popup").popup("open")}),$("#btn-unlock-software").click(function(){$("#lock-password")[0].value==TL.LoginPassword?($("#lock-password")[0].value="",$("#hrg-lock-software-popup").popup("close"),TL.LockScreen=!1):sweetAlert("输入密码错误","","error")}),$("#btn-plc").click(function(){TL.Plc_Current_State!=TL.Plc_State.converting&&($(this).buttonMarkup({icon:"hrg-load"}),TL.Plc_Current_State==TL.Plc_State.running||TL.Plc_Current_State==TL.Plc_State.error_running?(console.log("send close"),TL.PlcClose()):(console.log("send open"),TL.PlcOpen()),TL.Plc_Current_State=TL.Plc_State.converting,console.log("send status"),TL.PlcStatus())}),$("#btn-plc-stop").click(function(){console.log("send close"),TL.PlcClose(),console.log("send status"),TL.PlcStatus()})});